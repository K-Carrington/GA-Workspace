<!DOCTYPE html>
<html>
<head>
  <style media="screen">
  body {
    text-align: center;
      margin: 0 auto;
  }

  .form-row {
    margin: 20px;
  }
  .player_name {
    height: 16px;
  }
  
   .q_item {
      border: black 2px solid;
      width: 400px;
      height: 100px;
      font-size: 12px;
      text-align: center;
      margin: 0 auto;
      /*display: inline-block;*/
      vertical-align: top;
      list-style: none;
    }
  #card_items {
    margin-left: 50px;
  }
  .card_item {
      border: black 2px solid;
      width: 400px;
      height: 100px;
      font-size: 12px;
      float: left;
      /*display: inline-block;*/
    }
    .card_item br  {
      display: none;
    } /* To get rid of these tags from the input data */
    /*.card_item table {display: none;} */

  .card_title {
    float: left;
    font-size: 20px;
  }

  </style>
  <meta charset="utf-8">
	<title>Flash Card Challenge</title>
	<meta charset="utf-8">
	<!-- <link rel="stylesheet" type="text/css" href="">  -->
</head>
<body>
<h1>Flash Card Challenge</h1>

<div id="intro_screen">
  Two players select their own flashcard deck and time limit. An advanced player can compete against a beginner, a computer person can compete against a Japanese student...
  <p>Select number of cards for next game, then click next: </p>
  <select class="dropdown" id="num_cards">
	  <!--TBD How to do color here?-->
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <!-- <option value="num_c13">5</option>
    <option value="num_c14">6</option>
    <option value="num_c14">7</option>
    <option value="num_c14">8</option> -->
  </select> 
  <button id="to_2nd_screen_button">Next</button>

</div> <!-- end intro screen -->

<div id="player_setup_screen">
   <fieldset>
   <legend id="player_info_legend">Player Info</legend>

   <div class="form-row">
      <label>Player 1 Name</label>
      <textarea class="player_name" id="player_name1" type="text" name="firstname" placeholder="First name"></textarea>
    </div>

   <div class="form-row">
      <label>Player 1 Flashcard Deck</label>
      <select class="dropdown" id="deck1">
        <option>Select One</option>
        <optgroup label="Web Development">
          <option value="CS">Compuiter Science: Linux</option>
          <option value="JS1">Javascript 1</option>
          <option value="JS2">Javascript 2</option>
        </optgroup>
        <optgroup label="Japanese">
          <option value="N5K">N5 Kanji</option>
        <!--  <option>N4 Kanji</option> -->
        </optgroup>
      </select>
    </div>

    <div class="form-row">
      <label>Player 1 Time Limit</label>
      <select class="dropdown" id="time_limit1">
        <!--TBD How to do color here?-->
        <option value="2">2 secs</option>
        <option value="4">4 secs</option>
        <option value="6">6 secs</option>
        <option value="8">8 secs</option>
        <!-- <option value="num_c13">5</option>
        <option value="num_c14">6</option>
        <option value="num_c14">7</option>
        <option value="num_c14">8</option> -->
      </select> 
    </div>

    <div class="form-row">
      <label>Player 2 Name</label>
      <textarea class="player_name" id="player_name2" type="text" name="firstname" placeholder="First name"></textarea>
    </div>

   <div class="form-row">
      <label>Player 2 Flashcard Deck</label>
      <select class="dropdown" id="deck2">
        <option>Select One</option>
        <optgroup label="Web Development">
          <option value="CS">Compuiter Science: Linux</option>
          <option value="JS1">Javascript 1</option>
          <option value="JS2">Javascript 2</option>
        </optgroup>
        <optgroup label="Japanese">
          <option value="N5K">N5 Kanji</option>
        <!--  <option>N4 Kanji</option> -->
        </optgroup>
      </select>
    </div>

    <div class="form-row">
      <label>Player 2 Time Limit</label>
      <select class="dropdown" id="time_limit2">
        <!--TBD How to do color here?-->
        <option value="2">2 secs</option>
        <option value="4">4 secs</option>
        <option value="6">6 secs</option>
        <option value="8">8 secs</option>
        <!-- <option value="num_c13">5</option>
        <option value="num_c14">6</option>
        <option value="num_c14">7</option>
        <option value="num_c14">8</option> -->
      </select> 
    </div>

    <button id="to_3rd_screen_button">Begin Play</button>
  </fieldset>
</div> <!-- end player setup screen -->


<div id="main_screen">
  <div class="display" id="elapsed-time">elapsed time here</div>
  <div id"player">Player 1 name here</div>
  <div class="q_item">
    <p class="card_title">Question:</p>
    <div  id="question">Q</div>
  </div>

  <div id="card_items">
  <div class="card_item">
    <p class="card_title">A1:</p>
    <div class="multi_answers" id="answer1">A1</div>
  </div>
  <div class="card_item">
    <p class="card_title">A2:</p>
    <div class="multi_answers" id="answer2">A2</div>
  </div>
  <div class="card_item">
    <p class="card_title">A3:</p>
    <div class="multi_answers" id="answer3">A3</div>
  </div>
  <div class="card_item">
    <p class="card_title">A4:</p>
    <div class="multi_answers" id="answer4">A4</div>
  </div>
  </div>
  <div id="card_result"></div>
</div> <!-- end main screen -->


<div id="game_result_screen">
  <div id="game_result"></div>
  <button id="new_game_button">New Game</button>
</div> <!-- end result screen -->

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script type="text/javascript" src="load_flash_card_data.js"></script>

<script>
// Deck class (object constructor function)
  var Deck = function(name, diff_level, format, location) {
    this.name = name;
    this.difficulty = diff_level;
    this.format = format;
    this.location = location;
  }
  var decks = [];
  //TBD later put deck info from load_flash_card_data into here

var cs_deck_str = 'CS';
var js1_deck_str = 'JS1';
var js2_deck_str = 'JS2';
var nk5_deck_str = 'N5K';
//TBD set deck dropdowns with above strings

var card_deck = {};
card_deck[cs_deck_str] = Computer_Sci;
card_deck[js1_deck_str] = Javascript1_cards;
card_deck[js2_deck_str] = JS2_Sivers;
card_deck[nk5_deck_str] = JLPT_Kanji_N5;

/*  $('#question').html(Javascript1_cards[0][0]);
  $('#answer1').html(Javascript1_cards[1][1]);
  $('#answer2').html(Javascript1_cards[0][1]);
  $('#answer3').html(Javascript1_cards[2][1]);
  $('#answer4').html(Javascript1_cards[3][1]);

  $('#question').html(JLPT_Kanji_N5[0][0]);
  $('#answer1').html(JLPT_Kanji_N5[1][1]);
  $('#answer2').html(JLPT_Kanji_N5[0][1]);
  $('#answer3').html(JLPT_Kanji_N5[2][1]);
  $('#answer4').html(JLPT_Kanji_N5[3][1]); 

  $('#question').html(Computer_Sci[0][0]);
  $('#answer1').html(Computer_Sci[1][1]);
  $('#answer2').html(Computer_Sci[0][1]);
  $('#answer3').html(Computer_Sci[2][1]);
  $('#answer4').html(Computer_Sci[3][1]);
  
  $('#question').html(JS2_Sivers[0][0]);
  $('#answer1').html(JS2_Sivers[1][1]);
  $('#answer2').html(JS2_Sivers[0][1]);
  $('#answer3').html(JS2_Sivers[2][1]);
  $('#answer4').html(JS2_Sivers[3][1]); */

  // Starts out with all major divs at display:none / hide except for the first one. 
  // Screens are transitioned by display:none-ing other screens
  $('#player_setup_screen').hide();
  $('#main_screen').hide();
  $('#game_result_screen').hide();


  var whos_turn = 1;
  var player1 = {};
  var player2 = {};
  var game = {};
  var game_result = {};

  // Game class (object constructor function)
  var Game = function () {
    var number_of_cards = 0;

    this.introGame = function() {
      $('#to_2nd_screen_button').click(function(){
        number_of_cards = $('#num_cards').val();
       // num.split('');
       // this.number_of_cards = num[5];
        console.log("num cards = " + number_of_cards);
        $('#intro_screen').hide();
        $('#player_setup_screen').show();
      });
    }

    var picked_cards = {};

    this.playGame = function() {
      console.log("In playGame fun");
      // TBD play game alternating users
    // TBD randomly select card, save to not re-display, display it with it's answer and 3 other randomly selected answers randomly distributed.
    console.log("player 1 chosen_deck = " + player1.getChosenDeck());
    console.log("num of cards = " + number_of_cards);
      var curr_deck1 = card_deck[player1.getChosenDeck()];
      console.log("curr deck 1 length = " + curr_deck1.length);
      if (whos_turn === 1) {
        // pick with random (1..num cards)
        //TBD keep list of cards already done, TBD bail if tried deck-length(?) times
        var i = Math.floor((Math.random()) * curr_deck1.length);
        console.log("rand i = " + i);
        while (picked_cards[i]) {
          var i = Math.floor((Math.random()) * curr_deck1.length);
          console.log("rand i = " + i); 
        }
        picked_cards[i] = true;

        //TBD loop to find unique cards
        var j = Math.floor((Math.random()) * 4); //to randomly place correct answer
        console.log("rand j = " + j);
        var x = Math.floor((Math.random()) * curr_deck1.length); //to select a wrong ans
        console.log("rand x = " + x);
        var y = Math.floor((Math.random()) * curr_deck1.length); //to select a wrong ans
        console.log("rand y = " + y);
        var z = Math.floor((Math.random()) * curr_deck1.length); //to select a wrong ans
        console.log("rand z = " + z);
        var a,b,c,d;
        switch (j) { //scramble correct answer with others'
            case 0:
              a = i; b = x; c = y; d = z;
              break;
            case 1:
              a = x; b = i; c = y; d = z;
              break;
            case 2:
              a = x; b = y; c = i; d = z;
              break;
            case 3:
              a = x; b = y; c = z; d = i;
              break;
            default:
              console.log("***ERROR*** random j not 0..3!!!")
        }
        
        $('#question').html(curr_deck1[i][0]);
        $('#answer1').html(curr_deck1[a][1]);
        $('#answer2').html(curr_deck1[b][1]);
        $('#answer3').html(curr_deck1[c][1]);
        $('#answer4').html(curr_deck1[d][1]);
      }
      //TBD

      // TBD set-up answer handlers
      // remove and reset this for every j (correct answer)
      $('.multi_answers').click(function(){
        console.log("Box " + this.id + " clicked!");
  
        if (whos_turn === 1) {
         /* switch (player1.chosen_deck) {
            case '':
            break;
          }*/
        }
    
        // TBD display card result
        // TBD if number of cards done display game result (go to 4th screen)
      });
    } //play_game function

  } // Game class obj constructor function
  game = new Game();

  // Set up 1st screen button event handler to log number of cards selected and go to 2nd screen
  game.introGame();
  


  // Player class (object constructor function)
  var Player = function (player_num) { 
    var name = null;
    var chosen_deck = null;
    var chosen_time = null;
    this.points_scored = 0;

    this.setupPlayer = function() {
      $('#to_3rd_screen_button').click(function(){
        chosen_deck = $('#deck'+player_num).val();
        name = $('#player_name'+player_num).val();
        this.chosen_time = $('#time_limit'+player_num).val();
        console.log("Player " + player_num + " chosen deck = " + chosen_deck + ", name = " + name + ", time lim = " + this.chosen_time);
        $('#player_setup_screen').hide();
        $('#main_screen').show();
        if (player_num === 2) { //only want to call this once
          game.playGame();
        }
     });
    } // setupPlayer function

    //Set through setter function, so need getting function and to use local vars
    this.getName = function() {
      return name;
    }
    this.getChosenDeck = function() {
      return chosen_deck;
    }
    this.getChosenTime = function() {
      return chosen_time;
    }

  } // Player class obj constructor function
  player1 = new Player(1);
  player2 = new Player(2);

  // Set up 2nd screen button handler to log user info, go to 2nd user one if coming 
  //     coming from 1st user, else go to 3rd screen
  player1.setupPlayer();
  player2.setupPlayer();
  
 

  // Result class (object constructor function)
  var Result = function() {
    this.winner = null;    // no setter function so this s/be ok
    this.player1_pts = 0;
    this.player2_pts = 0;
    this.displayWinner = function() {
      $('.game_result').html('Winner is ' + this.winner + "!");
      //TBD also display points
    }
   

    //TBD set up #new_game_button press callback
  }

   game_result = new Result();
  
  // TBD set-up new game button handler

</script>


</body>
</html>